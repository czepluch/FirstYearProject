Whenever the user presses the \texttt{"Find"} button (for executing a search), two things happen: First, the address(es) are validated. If all needed addresses are valid, the search is executed in the \texttt{Model} package.

We will describe the process of searching for a location. The process of searching for a trip is the same, only it includes validating the contents of both input text fields and invoking a different method in the \texttt{Model} package.

The validity checking is as follows (as also illustrated on figure \ref{fig:ControlFlow} on page \pageref{fig:ControlFlow}):
\begin{itemize}
	\item The first address validation is done within the \texttt{SearchPanel} class, checking that both of the input text fields are not empty, and if only the first is empty, the content of the second text field is moved to the first text field.
	\item The contents of the text field is sent to the \texttt{View}, where the vertex id corresponding to the given address is found.
	\begin{itemize}
		\item If the input itself, once parsed, is stored in the \texttt{TernaryTrie} with a corresponding vertex id, this is used.
		\item Otherwise, a prefix search is done in the \texttt{TernaryTrie}, where the value of the first match is used as the vertex id.
	\end{itemize}
	\item If a vertex id is still not obtained / the input itself was not a match nor a prefix of any matches in the \texttt{TernaryTrie}, a warning message is displayed to the user informing that the input is invalid, and nothing more happens.
	\item If a vertex id is obtained, a method of the \texttt{ViewListener} (in the \texttt{Controller} class) is invoked, which again invokes a method in the \texttt{Model} class, obtaining an instance of the \texttt{MapLocation} class (storing the needed info about the location), which again is passed to the \texttt{View} class and from there to the \texttt{MapPanel} class, so it can be displayed to the user.
\end{itemize}

\begin{figure}[!h]
\centering
\begin{tikzpicture}
	\node [place, minimum size=2cm]	(View)			at (0,0)		{View}
		edge [in=-100, out=-80, loop] 	node [auto]	{6. updates} (View);
	\node [place, minimum size=2cm]	(Controller)		at (5.5,3)		{Controller}
		edge [pre, bend right=30]	node [auto, swap]	{1. vertex id}		(View)
		edge [post, bend left=30, very near end]	node [auto]	{5. MapLocation}		(View);
	\node [place, minimum size=2cm]	(Model)			at (11,0)		{Model}
		edge [pre, bend right=30]	node [auto, swap]	{2. vertex id}		(Controller)
		edge [post, bend left=30, dashed, very near start]	node [auto]	{4. return: MapLocation}		(Controller)
		edge [in=-100, out=-80, loop] 	node [auto]	{3. filters} (Model);
\end{tikzpicture}
\caption{An illustration of the flow of the application when a search for a location is executed. If the arrows of the text were changed, this would actually be a general illustration if the communication happening in all the processes within the application in which both the \texttt{Model} and the \texttt{View} packages are participants.}
\label{fig:ControlFlow}
\end{figure}
